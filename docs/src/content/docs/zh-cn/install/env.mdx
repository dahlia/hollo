---
title: 环境变量
description: 如何使用环境变量配置Hollo。
---

import { Aside, Badge } from '@astrojs/starlight/components';

Hollo是通过环境变量进行配置的。你可以在项目根目录的 *.env* 文件中设置它们，或者使用Docker的`-e`/`--env`选项或Railway的环境变量进行设置。

### `LISTEN_PORT` <Badge text="可选" /> <Badge text="Railway中未使用" variant="tip" />

服务器监听的端口号。默认为3000。

### `DATABASE_URL` <Badge text="Railway中未使用" variant="tip" />

PostgreSQL数据库的URL，例如：`postgresql://hollo:password@localhost/hollo`。

### `REDIS_URL` <Badge text="可选" /> <Badge text="Railway中未使用" variant="tip" />

Redis服务器的URL，例如：`redis://localhost/0`。

如果未设置，Hollo将使用PostgreSQL进行缓存和消息队列。

### `HOME_URL` <Badge text="可选" />

如果存在，主页将重定向到此URL。如果未设置，主页将显示实例上的账户列表。

### `SECRET_KEY` <Badge text="Railway中未使用" variant="tip" />

用于保护会话的密钥。你可以使用以下命令生成一个随机密钥：

~~~~ sh frame="none"
openssl rand -hex 32
~~~~

### `REMOTE_ACTOR_FETCH_POSTS` <Badge text="可选" />

首次遇到远程用户时，从远程用户获取的最近公开帖子数量。

默认为`10`。

### `LOG_LEVEL` <Badge text="可选" />

应用程序的日志级别。可选项有：`debug`、`info`、`warning`、`error`和`fatal`。

默认是`info`。

### `LOG_QUERY` <Badge text="可选" />

将此设置为`true`以记录SQL查询。

默认关闭。

### `BEHIND_PROXY` <Badge text="可选" /> <Badge text="Railway中未使用" variant="tip" />

如果Hollo在反向代理后面，请将此设置为`true`。如果你将Hollo放在L7负载均衡器后面（通常应该这样做），请开启此选项。

默认关闭。

<Aside>
  启用此选项后，Hollo将信任来自反向代理的`X-Forwarded-For`、`X-Forwarded-Proto`和`X-Forwarded-Host`头。这对于安全来说非常重要。
</Aside>

### `ALLOW_PRIVATE_ADDRESS` <Badge text="可选" />

将此选项设置为`true`将禁用 SSRF（服务器端请求伪造）保护。

打开此选项可在本地网络中进行测试。

默认情况下关闭。

<Aside>
  启用此选项存在严重的安全隐患。
  仅在受信任的环境下使用此选项，切勿在生产环境中使用。
</Aside>

### `S3_REGION` <Badge text="可选" />

S3兼容对象存储的区域，例如：`us-east-1`。在某些非S3服务中，可以省略此项。默认为`auto`。

### `S3_BUCKET`

S3兼容对象存储的桶名称，例如：`hollo`。

### `S3_URL_BASE`

S3兼容对象存储的公网URL基址，例如：
`https://hollo.s3.us-east-1.amazonaws.com`。

### `S3_ENDPOINT_URL`

S3兼容对象存储的端点URL，例如：
`https://s3.us-east-1.amazonaws.com`。

### `S3_FORCE_PATH_STYLE`

是否强制在S3兼容对象存储中使用路径格式的URL。设置为`true`开启，`false`关闭。对于非AWS的S3兼容服务非常有用。默认关闭。

### `AWS_ACCESS_KEY_ID`

S3兼容对象存储的访问密钥ID。

### `AWS_SECRET_ACCESS_KEY`

S3兼容对象存储的访问密钥。
